program: blip2_opt27_coco.py
method: bayes
metric:
  name: val/loss
  goal: minimize

parameters:
  lr:
    values: [5e-5, 1e-4, 2e-4]

  lora_r:
    values: [4, 8, 16]

  lora_alpha:
    values: [8, 16, 32]

  warmup_steps:
    values: [200, 500, 1000]

  max_steps:
    values: [30000, 40000, 60000]

  lora_dropout:
    values: [0.05, 0.1]

command:
  - ${env}
  - python
  - ${program}
  - --lavis_repo=/home/ali95/LAVIS
  - --ann_train=/scratch/ali95/coco/coco/annotations/captions_train2017.json
  - --ann_val=/scratch/ali95/coco/coco/annotations/captions_val2017.json
  - --images_train=/scratch/ali95/coco/coco/train2017
  - --images_val=/scratch/ali95/coco/coco/val2017
  - --output_dir=/scratch/ali95/blip2_runs/sweep
  - --model_type=pretrain_opt2.7b
  - --batch_size=16
  - --accum_steps=4
  - --bf16
  - --use_lora
  - --use_wandb
